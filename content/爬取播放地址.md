Title: 搜索歌曲播放地址
Date: 2024-8-10
Category: Python
Tags: requests
Slug: b9a8d1f9

<!-- 以下是正文，使用 Markdown 语法 -->
```
import requests
import re

def music():
    song_name = input("请输入歌曲名称：")
    # 直接拼接URL（requests会自动编码）
    url = f"https://pinkamuz.pro/search/{song_name}"
    # 获取HTML
    response = requests.get(url)
    html = response.text
    # 查找歌曲信息
    pattern = r'<span class="artist __adv_artist">.*?<a[^>]*>([^<]+)</a>.*?<span class="title __adv_name">([^<]+)</span>.*?<a class="link"[^>]*href="([^"]+)"'
    results = re.findall(pattern, html, re.DOTALL)
    # 只取前5条结果
    results = results[:5]
    print(f"找到 {len(results)} 首歌曲：\n")
    for artist, title, play_url in results:
        if play_url.startswith('//'):
            play_url = 'https:' + play_url
        print(f"#EXTINF:-1,{title}-{artist}")
        print(play_url)
        print("-" * 40)

while True:
    music()	
```


