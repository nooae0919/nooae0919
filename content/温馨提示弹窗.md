Title: æ¸©é¦¨æç¤ºå¼¹çª—
Date: 2025-12-4
Category: Python
Tags: tkinter
Slug: b9a7d1f3

<!-- ä»¥ä¸‹æ˜¯æ­£æ–‡ï¼Œä½¿ç”¨ Markdown è¯­æ³• -->
```
import tkinter as tk
import random
import time
import threading
 
 
class TipWindowManager:
    """æ¸©é¦¨æç¤ºçª—å£ç®¡ç†å™¨"""
 
    def __init__(self):
        self.root = tk.Tk()
        self.root.withdraw()
        # ä½¿ç”¨åˆ—è¡¨å­˜å‚¨æ´»è·ƒçª—å£ï¼Œé¿å…é¢å¤–æ•°æ®ç»“æ„å ç”¨å†…å­˜
        self.active_windows = []
        self.windows_created = 0
 
        # é…ç½®å‚æ•°ï¼ˆä¿æŒæ ¸å¿ƒåŠŸèƒ½ï¼Œç§»é™¤æ‰“å°ç›¸å…³é€»è¾‘ï¼‰
        self.window_count = 150
        self.create_interval = 0.05
 
        # ä»…è·å–å¿…è¦çš„å±å¹•å°ºå¯¸ï¼Œä¸å­˜å‚¨å†—ä½™ä¿¡æ¯
        self.screen_width = self.root.winfo_screenwidth()
        self.screen_height = self.root.winfo_screenheight()
 
        # æç¤ºå†…å®¹ä¸é¢œè‰²åº“ï¼ˆä½¿ç”¨å…ƒç»„å­˜å‚¨ï¼Œæ¯”åˆ—è¡¨æ›´èŠ‚çœå†…å­˜ï¼‰
        self.tips = (
            'å¤šå–æ°´å“¦~ğŸ’§', 'ä¿æŒå¾®ç¬‘å‘€ğŸ˜Š', 'æ¯å¤©éƒ½è¦å…ƒæ°”æ»¡æ»¡âœ¨',
            'è®°å¾—åƒæ°´æœğŸ', 'ä¿æŒå¥½å¿ƒæƒ…ğŸŒ', 'å¥½å¥½çˆ±è‡ªå·±â¤ï¸',
            'æœŸå¾…ä¸‹ä¸€æ¬¡è§é¢ğŸ‘‹', 'é¡ºé¡ºåˆ©åˆ©ğŸ¯', 'æ—©ç‚¹ä¼‘æ¯ğŸŒ™',
            'æ„¿æ‰€æœ‰çƒ¦æ¼éƒ½æ¶ˆå¤±ğŸŒˆ', 'åˆ«ç†¬å¤œâ°', 'ä»Šå¤©è¿‡å¾—å¼€å¿ƒå˜›ğŸ‰',
            'å¤©å†·äº†ï¼Œå¤šç©¿è¡£æœğŸ§¥', 'ä¿æŠ¤çœ¼ç›å“¦ğŸ‘€',
            'æ·±å‘¼å¸æ”¾æ¾ä¸€ä¸‹ğŸŒ¬ï¸', 'ä½ çœŸæ£’ï¼ğŸŠ', 'ä¸€åˆ‡éƒ½ä¼šå¥½çš„ğŸŒ»',
            'ä¿æŒç§¯æå¿ƒæ€âš¡', 'åŠ æ²¹ï¼ğŸš€', 'ç›¸ä¿¡è‡ªå·±ğŸ’ª',
            'ä»Šå¤©ä¹Ÿæ˜¯ç¾å¥½çš„ä¸€å¤©ğŸŒ', 'ä¿æŒè€å¿ƒâ³', 'æ…¢æ…¢æ¥æ¯”è¾ƒå¿«ğŸ¢',
            'ä½ å¾ˆç‰¹åˆ«ğŸŒŸ', 'ä¸–ç•Œå› ä½ è€Œç¾ä¸½ğŸŒ', 'æ”¾æ¾ä¸€ä¸‹ğŸµ',
            'äº«å—å½“ä¸‹ğŸ¯', 'æ„Ÿæ©ç”Ÿæ´»ğŸ™', 'ä¿æŒå¥½å¥‡å¿ƒğŸ”',
            'å‹‡æ•¢åšè‡ªå·±ğŸ¦', 'è¿›æ­¥ä¸€ç‚¹ç‚¹ğŸ“ˆ', 'æ¸©æš–å¦‚æ˜¥ğŸŒº',
            'å¿ƒå¹³æ°”å’ŒğŸƒ', 'æ¢¦æƒ³æˆçœŸğŸ ', 'å¿«ä¹å¾ˆç®€å•ğŸ˜„',
            'é˜³å…‰æ€»åœ¨é£é›¨åğŸŒ¦ï¸', 'åšæŒå°±æ˜¯èƒœåˆ©ğŸ†', 'ä½ æ˜¯æœ€æ£’çš„â­',
            'ç”Ÿæ´»å¾ˆç¾å¥½ğŸŒ·', 'å‘å‰çœ‹ğŸ‘£', 'æ¸©æŸ”å¾…äººğŸ’',
            'çæƒœå½“ä¸‹ğŸ', 'å¹¸ç¦åœ¨èº«è¾¹ğŸˆ'
        )
 
        self.bg_colors = (
            '#FFF0F5', '#F0FFFF', '#F5FFFA', '#FFF8DC', '#F0F8FF',
            '#F8F8FF', '#F5F5F5', '#FAFAD2', '#E6E6FA', '#FFE4E1',
            '#FFFAF0', '#FDF5E6', '#FAF0E6', '#FFF5EE', '#F0FFF0',
            '#F5F5DC', '#FFEFD5', '#FFE4B5', '#FAF0E6', '#F8F8FF',
            '#F0F8FF', '#E0FFFF', '#E6E6FA', '#FFF0F5', '#FFE4E1',
            '#FFFAFA', '#F5F5F5', '#F0F0F0', '#FFF8DC', '#FFE4C4',
            '#FFDAB9', '#FFEFD5', '#FFFACD', '#F0E68C', '#E6E6FA',
            '#D8BFD8', '#DDA0DD', '#EE82EE', '#DA70D6', '#FFB6C1'
        )
 
    def create_random_window(self):
        """éšæœºåˆ›å»ºä¸€ä¸ªå¯¹è¯æ¡†ï¼ˆä¼˜åŒ–å†…å­˜å ç”¨ï¼šå‡å°‘å±€éƒ¨å˜é‡ã€åŠæ—¶æ¸…ç†æ— æ•ˆå¼•ç”¨ï¼‰"""
        if self.windows_created >= self.window_count:
            return
 
        try:
            window = tk.Toplevel()
            self.active_windows.append(window)
            self.windows_created += 1
 
            # éšæœºçª—å£å°ºå¯¸
            window_width = random.randint(220, 300)
            window_height = random.randint(90, 130)
 
            # è®¡ç®—å±å¹•å†…éšæœºä½ç½®ï¼Œé¿å…è¾¹ç•Œæº¢å‡º
            x = random.randint(10, self.screen_width - window_width - 10)
            y = random.randint(10, self.screen_height - window_height - 10)
 
            # çª—å£åŸºç¡€é…ç½®
            window.title('æ¸©é¦¨æç¤º')
            window.geometry(f"{window_width}x{window_height}+{x}+{y}")
            window.resizable(False, False)
            window.attributes('-topmost', True, '-alpha', 0.95)
 
            # æ ‡ç­¾åˆ›å»º
            label = tk.Label(
                window,
                text=random.choice(self.tips),
                bg=random.choice(self.bg_colors),
                fg='#2F4F4F',
                font=('å¾®è½¯é›…é»‘', random.randint(11, 13)),
                padx=18,
                pady=22,
                wraplength=window_width - 36,
                justify='center',
                relief='flat',
                bd=1
            )
            label.pack(expand=True, fill='both')
 
            # å…³é—­æ—¶é—´ä¸æ·¡å‡ºé€»è¾‘
            close_time = random.randint(2000, 4000)
 
            def close_window():
                if not window.winfo_exists():
                    return
                # ç®€åŒ–æ·¡å‡ºå¾ªç¯ï¼Œå‡å°‘å¾ªç¯æ¬¡æ•°
                for alpha in range(95, 0, -15):
                    if window.winfo_exists():
                        window.attributes('-alpha', alpha / 100)
                        window.update()
                        time.sleep(0.01)
                # å…³é—­åç«‹å³ä»æ´»è·ƒåˆ—è¡¨ç§»é™¤ï¼Œé‡Šæ”¾å†…å­˜
                if window.winfo_exists():
                    window.destroy()
                if window in self.active_windows:
                    self.active_windows.remove(window)
 
            window.after(close_time, close_window)
 
            # ç‚¹å‡»å…³é—­é€»è¾‘ï¼ˆå¤ç”¨close_windowï¼Œå‡å°‘ä»£ç å†—ä½™ï¼‰
            def on_click(event):
                close_window()
 
            window.bind('<Button-1>', on_click)
            label.bind('<Button-1>', on_click)
 
        except Exception:
            # å¼‚å¸¸æ—¶æ¸…ç†æ— æ•ˆçª—å£å¼•ç”¨ï¼Œé¿å…å†…å­˜æ³„æ¼
            if 'window' in locals() and window in self.active_windows:
                self.active_windows.remove(window)
                if window.winfo_exists():
                    window.destroy()
 
    def check_completion(self):
        """æ£€æŸ¥æ˜¯å¦æ‰€æœ‰çª—å£å…³é—­ï¼ˆç®€åŒ–åˆ¤æ–­é€»è¾‘ï¼Œå‡å°‘èµ„æºæŸ¥è¯¢ï¼‰"""
        if not self.active_windows and self.windows_created >= self.window_count:
            self.root.quit()
        else:
            self.root.after(500, self.check_completion)
 
    def start_random_creation(self):
        """å¼€å§‹éšæœºåˆ›å»ºçª—å£"""
 
        def create_loop():
            # å¾ªç¯åˆ›å»ºçª—å£ï¼Œç›´åˆ°è¾¾åˆ°ç›®æ ‡æ•°é‡
            while self.windows_created < self.window_count:
                # ä½¿ç”¨afterç¡®ä¿UIæ“ä½œåœ¨ä¸»çº¿ç¨‹ï¼Œé¿å…çº¿ç¨‹å®‰å…¨é—®é¢˜
                self.root.after(0, self.create_random_window)
                # éšæœºé—´éš”ï¼Œå¹³è¡¡å¼¹å‡ºæ•ˆæœä¸æ€§èƒ½
                time.sleep(random.uniform(0.03, 0.08))
 
            # æ‰€æœ‰çª—å£åˆ›å»ºå®Œæˆåï¼Œå¯åŠ¨å®Œæˆæ£€æŸ¥
            self.root.after(2000, self.check_completion)
 
        return create_loop
 
    def main(self):
        """ä¸»ç¨‹åºï¼ˆä¼˜åŒ–çº¿ç¨‹ç®¡ç†ï¼Œç¡®ä¿èµ„æºæ­£ç¡®é‡Šæ”¾ï¼‰"""
        # å¯åŠ¨åˆ›å»ºçº¿ç¨‹ï¼Œè®¾ç½®å®ˆæŠ¤çº¿ç¨‹ç¡®ä¿ç¨‹åºé€€å‡ºæ—¶è‡ªåŠ¨å…³é—­
        thread = threading.Thread(target=self.start_random_creation(), daemon=True)
        thread.start()
 
        try:
            self.root.mainloop()
        finally:
            # å¼ºåˆ¶æ¸…ç†æ‰€æœ‰å‰©ä½™çª—å£ï¼Œé¿å…å†…å­˜æ³„æ¼
            for window in self.active_windows:
                try:
                    if window.winfo_exists():
                        window.destroy()
                except Exception:
                    pass
            self.root.quit()
 
 
def main():
    """ä¸»å‡½æ•°ï¼ˆç®€åŒ–è°ƒç”¨ï¼Œå‡å°‘ä¸­é—´å˜é‡ï¼‰"""
    TipWindowManager().main()
 
 
if __name__ == "__main__":
    main()
	
```


